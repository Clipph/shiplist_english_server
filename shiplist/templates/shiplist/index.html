{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Ship List</title>
    <link rel="stylesheet" href="{% static 'shiplist/style.css' %}" />
  </head>
  <body>
    <div class="container">
      <h1>💙 Ship List 💙</h1>
      <table>
  <thead>
    <tr>
      <th>Ship No.</th>
      <th>Half</th>
      <th>Half Other</th>
      <th>Status</th>
      <th>Shipped Date</th>
      <th>Remarks</th> <!-- You can keep this empty for spacing or remove if you want -->
    </tr>
  </thead>
  <tbody>
    {% for ship in ships %}
    <tr>
      <td>{{ ship.ship_no }}</td>
      <td>{{ ship.half }}</td>
      <td>{{ ship.half_other }}</td>
      <td>{{ ship.get_status_display }}</td>
      <td>{{ ship.shipped_date }}</td>
      <td style="width: 40px; text-align: center;">
        {% if ship.remarks %}
          <!-- Note button -->
          <button class="note-btn" data-remarks="{{ ship.remarks|escapejs }}">📝</button>
        {% else %}
          <!-- Keep space reserved but empty -->
          &nbsp;
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Modal container -->
<div id="remarks-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span id="modal-close" class="close">&times;</span>
    <p id="modal-text"></p>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('remarks-modal');
    const modalText = document.getElementById('modal-text');
    const modalClose = document.getElementById('modal-close');

    document.querySelectorAll('.note-btn').forEach(button => {
      button.addEventListener('click', () => {
        const remarks = button.getAttribute('data-remarks');
        modalText.textContent = remarks;
        modal.style.display = 'flex';
      });
    });

    modalClose.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    // Close modal if clicking outside the content
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });
  });
</script>

  </body>
</html>
